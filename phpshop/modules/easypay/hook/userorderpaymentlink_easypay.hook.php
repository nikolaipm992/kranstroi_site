<?phpfunction userorderpaymentlink_mod_easypay_hook($obj, $PHPShopOrderFunction) {	global $PHPShopSystem;    // Настройки модуля    include_once(dirname(__FILE__) . '/mod_option.hook.php');    $PHPShopEasypayArray = new PHPShopEasypayArray();    $option = $PHPShopEasypayArray->getArray();	// Тип оплаты	$order_metod = $PHPShopOrderFunction->getSerilizeParam('orders.Person.order_metod');	if ($order_metod == 10002) {		if (intval($PHPShopOrderFunction->getParam('statusi')) == intval($option['status'])) {			// Номер счета			$mrh_ouid = explode("-", $PHPShopOrderFunction->objRow['uid']);			$inv_id = $mrh_ouid[0] . "" . $mrh_ouid[1];			// Сумма покупки			$out_summ = $PHPShopOrderFunction->getTotal();			// Подпись			$sign = md5($option['EP_MerNo'] . $option['web_key'] . $option['EP_OrderNo'] . $option['EP_Sum']);			// Платежная форма			$payment_forma = PHPShopText::setInput('hidden', 'EP_MerNo', $option['EP_MerNo']);			$payment_forma .= PHPShopText::setInput('hidden', 'EP_Expires', $option['EP_Expires']);			$payment_forma .= PHPShopText::setInput('hidden', 'EP_Comment', $PHPShopSystem->getParam('name') . ': Заказ ' . $PHPShopOrderFunction->objRow['uid'], false, 10);			$payment_forma .= PHPShopText::setInput('hidden', 'EP_Hash', $sign);			$payment_forma .= PHPShopText::setInput('hidden', 'EP_OrderNo', $inv_id);			$payment_forma .= PHPShopText::setInput('hidden', 'EP_Sum', $out_summ);			$payment_forma.=PHPShopText::setInput('submit', 'send', $option['title'], $float = "none", 250);			if ($option['EP_Debug'] == 1) {				$url = 'https://ssl.easypay.by/test/client_weborder.php';			} else {				$url = 'https://ssl.easypay.by/weborder';			}			$return = PHPShopText::form($payment_forma, 'Easypaypay', 'post', $url, '_blank');		} elseif ($PHPShopOrderFunction->getSerilizeParam('orders.Person.order_metod') == 10002)			$return = ', Заказ обрабатывается менеджером';	}    return $return;}$addHandler = array    (    'userorderpaymentlink' => 'userorderpaymentlink_mod_easypay_hook');?>